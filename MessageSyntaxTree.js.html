<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>MessageSyntaxTree.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="DiscordManager.html">DiscordManager</a><ul class='methods'><li data-type='method'><a href="DiscordManager.html#.embedFromFile">embedFromFile</a></li><li data-type='method'><a href="DiscordManager.html#.embedFromSyntaxTree">embedFromSyntaxTree</a></li><li data-type='method'><a href="DiscordManager.html#.fakeMessage">fakeMessage</a></li><li data-type='method'><a href="DiscordManager.html#.handleChanges">handleChanges</a></li><li data-type='method'><a href="DiscordManager.html#.handleChannelUpdates">handleChannelUpdates</a></li><li data-type='method'><a href="DiscordManager.html#.handleDeletes">handleDeletes</a></li><li data-type='method'><a href="DiscordManager.html#.handleMessages">handleMessages</a></li><li data-type='method'><a href="DiscordManager.html#.locateThread">locateThread</a></li><li data-type='method'><a href="DiscordManager.html#.syntaxTreeParseText">syntaxTreeParseText</a></li></ul></li><li><a href="module-SyntaxTree-ChangeSyntaxTree.html">ChangeSyntaxTree</a></li><li><a href="module-SyntaxTree-ChannelSyntaxTree.html">ChannelSyntaxTree</a></li><li><a href="module-SyntaxTree-DeleteSyntaxTree.html">DeleteSyntaxTree</a></li><li><a href="module-SyntaxTree-MessageSyntaxTree.html">MessageSyntaxTree</a></li><li><a href="module-SyntaxTree-SyntaxTreeBase.html">SyntaxTreeBase</a></li></ul><h3>Modules</h3><ul><li><a href="module-databaseManager.html">databaseManager</a><ul class='methods'><li data-type='method'><a href="module-databaseManager.html#~locateChannelMap">locateChannelMap</a></li><li data-type='method'><a href="module-databaseManager.html#~locateMessageMaps">locateMessageMaps</a></li><li data-type='method'><a href="module-databaseManager.html#~locateThreadMap">locateThreadMap</a></li><li data-type='method'><a href="module-databaseManager.html#~messageMap">messageMap</a></li><li data-type='method'><a href="module-databaseManager.html#~tableLocateMap">tableLocateMap</a></li><li data-type='method'><a href="module-databaseManager.html#~tableMap">tableMap</a></li></ul></li><li><a href="module-databaseWrapper.html">databaseWrapper</a><ul class='methods'><li data-type='method'><a href="module-databaseWrapper.html#~locateMessageMaps">locateMessageMaps</a></li><li data-type='method'><a href="module-databaseWrapper.html#~messageMap">messageMap</a></li><li data-type='method'><a href="module-databaseWrapper.html#~messageMapToMessage">messageMapToMessage</a></li><li data-type='method'><a href="module-databaseWrapper.html#~startup">startup</a></li></ul></li><li><a href="module-discordManager.html">discordManager</a></li><li><a href="module-fileManager.html">fileManager</a><ul class='methods'><li data-type='method'><a href="module-fileManager.html#.fileDownload">fileDownload</a></li><li data-type='method'><a href="module-fileManager.html#~completeDownload">completeDownload</a></li><li data-type='method'><a href="module-fileManager.html#~completeDownloadErrorHandler">completeDownloadErrorHandler</a></li><li data-type='method'><a href="module-fileManager.html#~fileDelete">fileDelete</a></li><li data-type='method'><a href="module-fileManager.html#~fileSize">fileSize</a></li><li data-type='method'><a href="module-fileManager.html#~getValidFileName">getValidFileName</a></li></ul></li><li><a href="module-fileServer.html">fileServer</a><ul class='methods'><li data-type='method'><a href="module-fileServer.html#~getRequestedPath">getRequestedPath</a></li><li data-type='method'><a href="module-fileServer.html#~showFileList">showFileList</a></li></ul></li><li><a href="module-Start.html">Start</a><ul class='methods'><li data-type='method'><a href="module-Start.html#~startUp">startUp</a></li></ul></li><li><a href="module-SyntaxTree.html">SyntaxTree</a></li></ul><h3>Externals</h3><ul><li><a href="external-SlackEventAdapter.html">SlackEventAdapter</a></li><li><a href="external-WebClient.html">WebClient</a></li></ul><h3>Global</h3><ul><li><a href="global.html#unwrapAttachment">unwrapAttachment</a></li><li><a href="global.html#userIdentify">userIdentify</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">MessageSyntaxTree.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Don't mind me lazily using class instances as a lazy way to deep clone objects :P
/**
 * Helper classes used as an intermediate in the bridging process between two services
 * @module SyntaxTree
 */

/**
 * Base for bridge syntax trees
 */
class SyntaxTreeBase {
	// Where the message originates from. In the case of this project, it should always be set to "slack"
	source = "Unknown";
	// Message Timestamp in seconds (Not milliseconds! Add that to additional if it is needed or just calculate it yourself)
	timestamp = 0;
	// What action to reflect. Examples: "send", "edit", "pin", "delete"
	action = "none";

	// Data fetched to assist with plugging holes in message while parsing
	// Example: Object linking up a channel ID with a channel name
	parseData = {
		channels: [],
		users: [],
		emojis: [],
		channel: {
			name: "Unknown Channel",
			description: "No Description",
			topic: "",
			purpose: "",
			id: ""
		}
	};

	// Miscellaneous. Assign and utilize as needed
	// Meant for data that is specific to your project that the bridging end requires to pass the message on
	/**
	 * Currently Used for
	 * @property {string} channelId Channel ID from Slack
	 * @property {number} deletedTimestamp The timestamp of the message being deleted in delete events
	 * @property {Object} thread Thread data if the message was sent in a thread
	 * @property {Object} thread.timestamp Thread timestamp
	 */
	additional = {}

	// Helper methods that silently validate and set or ignore new values
	// Set property as long as a string is passed in and ignore otherwise. More specific validation to be added
	setIfString(propName, str) {
		if(this[propName] !== undefined &amp;&amp; typeof str === "string") {
			this[propName] = str;
		}
	}
}

/**
 * Class used between the original message and bridged message
 * Purpose: Deconstruct messages from whatever form they come in as into a common structure for the bridge to utilize
 * @class MessageSyntaxTree
 * @extends {SyntaxTreeBase}
 */
class MessageSyntaxTree extends SyntaxTreeBase {
	/**
	 * Intended action to be performed using the syntax tree data
	 * @type {string}
	 */
	action = "send";

	/**
	 * Name of the sender. Defaults to "Unknown Pupper"
	 * @type {string}
	 */
	name = "Unknown Pupper";
	/**
	 * URL to sender's profile picture. Defaults to a link to gif profile pic of a dog
	 * @type {string}
	 */
	profilePic = "https://media.giphy.com/media/S8aEKUGKXHl8WEsDD9/giphy.gif";
	/**
	 * The main content of the original message in unparsed form. Defaults to "[No Message Contents]"
	 * @type {string}
 	 */
	unparsedText = "[No Message Contents]";
	/**
	 * Color to use for embeds. Defaults to a shade of blue ("#407ABA")
	 * @type {string}
	 */
	color = "#407ABA";
	/**
	 * Files and embeds' data
	 * @type {Object}
	 * @property {FileData[]} files Array of file data
	 * @property {MessageSyntaxTree[]} embeds Array of additional embed data
	 */
	attachments = {
		files: [],
		embeds: []
	};

	constructor() {
		super();
		/**
		 * Additional property for thread id added
		 * @type {string}
		 */
		this.parseData.thread = {
			id: ""
		};
	}
}

/**
 * Syntax Tree for deletion events
 * @class DeleteSyntaxTree
 * @extends {SyntaxTreeBase}
 */
class DeleteSyntaxTree extends SyntaxTreeBase {
	action = "delete";
	/**
	 * An ID used to identify what message to delete
	 * @type {string}
	 */
	messageIdentifier = "";
	/**
	 * Time of deletion
	 * @type {number}
	 */
	deletedTimestamp = undefined;
	/**
	 * If applicable, the ID of the thread in which the message belongs to
	 * @type {string|number}
	 */
	threadId = undefined;
}

/**
 * Syntax Tree for content changes
 * @class ChangeSyntaxTree
 * @extends {SyntaxTreeBase}
 */
class ChangeSyntaxTree extends MessageSyntaxTree {
	action = "edit";
	/**
	 * The text to replace the old content with
	 * @type {string}
	 */
	newUnparsedText = "[No Message Contents]";
	/**
	 * Time of edit. Never used
	 * @type {number}
	 */
	changeTimestamp = undefined;
}

/**
 * Class for channel data changes. Literally no different from a SyntaxTreeBase instance&lt;br>
 * Extending only to make a clearer name for its purpose
 * @class ChannelSyntaxTree
 * @extends {SyntaxTreeBase}
 */
class ChannelSyntaxTree extends SyntaxTreeBase {
	// Literally no changes
}

module.exports = {
	MessageSyntaxTree,
	DeleteSyntaxTree,
	ChangeSyntaxTree,
	ChannelSyntaxTree
};</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a> on Tue Jan 25 2022 17:04:22 GMT-0800 (Pacific Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
